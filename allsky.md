#### [Processing All-Sky Images](#processingallskyimages)

All-sky images are acquired by a variety of surveys and are usually created by combining together individual images into a full-sky mosaic.  The process described below assumes that you are starting with an all-sky image and will walk through how to process these data so that they can be TOAST projected into a multi-resolution format that can be hosted in the Cloud.

1.  Download the WWT SDK, available here: On the Tools page: [http://www.worldwidetelescope.org/Download/Tools](http://www.worldwidetelescope.org/Download/Tools) click on "SDK with data pipeline and original ADK tools" which should link to: [http://wwtweb.blob.core.windows.net/drops/WWTSDK.msi](http://wwtweb.blob.core.windows.net/drops/WWTSDK.msi).
2.  Install the SDK. It will install a folder: C:\Program Files (x86)\Microsoft Research\WorldWide Telescope SDK.  Go into that folder and then into "Sphere Toaster" and then execute the program: "SphereToaster.exe".
3.  In SphereToaster start with the "Input" tab. Click "Open" and navigate to the padded image in equi-rectangular projection.  Assuming you have a full 360 all-sky image, you should not have to change any of the numbers.
4.  Many all-sky surveys, such as this example, are in Galactic coordinates; check the “Galactic Coordinates” checkbox if that is the case.
    ![](https://cloud.githubusercontent.com/assets/9676722/12994470/9384419e-d0e6-11e5-804e-321bfd1514f4.jpg)
5.  Under the Output tab, select a folder where the processed files will be created. Note, that the total size of the processed data can be much more than the original, especially if the input image is compressed with much black, so make sure the output drive has sufficient space.
6.  Under Type, choose "Sky". In order to preserve transparency, keep the output format as PNG and do not select JPEG.
    ![](https://cloud.githubusercontent.com/assets/9676722/12994471/93855a0c-d0e6-11e5-8886-9427016d9409.jpg)
7.  Under the WTML tab, you can give the descriptive information for the image. Under Title, you should give a descriptive (and short) title that will show up in WWT.  Under Credits, you can put the caption information, including the credit to the person or organization who owns the copyright of the image.  You can specify the URL (Credits URL) which points to web page that described the image or data.  Assuming you are going to make this all-sky image available on-line you can specify the URL to the web server that will serve the all-sky data (Storage URL).  Note this can be changed easily if you don’t set this now or change the location of the server later.
    ![](https://cloud.githubusercontent.com/assets/9676722/12994472/93863fd0-d0e6-11e5-81e0-0d5039bcaad7.jpg)
8.  When you are finished entering this metadata, go back to the Output tab and click on: "Generate Pyramid + WTML". This will take a while.  For this example (roughly 6,000 x 3,000) it took about 22 minutes on a reasonably fast PC.  Note, that while it is working the GUI doesn't get updated and the window banner will show "WWT SphereToaster (Alpha) (Not Responding."  It is actually running so don’t close the window. It will report some progress in the Messages window in the lower right of the Output tab.  When you first load the image it will report that it found the input image (“Loaded C:\Users\docto\Downloads\Milky Way CO.jpg” in this example).  You can check on it with the task manager or by looking at the properties of the output folder; the total output size should be increasing as the process runs and generates more files.  When it is finished SphereToaster will report the number of tiles created and time to process the data (“Created 1365 tiles in 1343.125 sec = 22.3854166666667 min (0.983974358974359 sec per tile)” in this example), see below.
    ![](https://cloud.githubusercontent.com/assets/9676722/12994469/93838470-d0e6-11e5-9bd4-c157c2e06c1d.jpg)
9.  When this is complete, the process will create the following
    *   Folder full of tiles, g., “Milky Way CO”
    *   WTML file to use locally, “Milky Way COLOCAL.wtml”. This is only used for local testing and cannot be shared outside the machine you are working on.
    *   WTML file to use when the data are on a web server, “Milky Way CO.wtml”. Once the data are processed and moved to the specified server, sharing this file will provide access to it.
    *   Thumbnail; the name is a lower case version of the title with spaces replaced with underscores (e.g.,, “milky_way_co.jpg”)
10.  You can view the generated all-sky image by starting WorldWide Telescope and then double-clicking on the local version of the WTML file. In this example it is "Milky Way COLOCAL.wtml".  Note, that this points to the specific location on disk where you specified the output, so if you move that folder you have to edit this local WTML file.
11.  The other version of the WTML file without appended “LOCAL” (in this example, “Milky Way CO.wtml”) is setup to point to a data on a web server. In the WTML file, you should review the location of (Url="[Storage URL]/Milky Way CO/{1}/{3}/{3}_{2}.jpg", “Storage URL” was specified in the WTML tab).  After the image pyramid is created, you can move it to the web server and then use the “Milky Way CO.wtml” to access the data over the web. If you move the data to a different web server, you need to change the server address in the Url tag in the WTML file.

You can find additional information on how to use SphereToaster tool in the SDK (as well as the other tools) here:

[http://www.worldwidetelescope.org/Developers/DataToolsGuide#WWTSphereToaster](http://wwtstaging.azurewebsites.net/Developers/DataToolsGuide#WWTSphereToaster)
